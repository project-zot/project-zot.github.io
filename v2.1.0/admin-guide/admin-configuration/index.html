<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Zot Registry"><link href=https://zotregistry.dev/v2.1.0/admin-guide/admin-configuration/ rel=canonical><link href=../admin-getting-started/ rel=prev><link href=../../developer-guide/onboarding/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.2"><title>Configuring zot - zotregistry.dev</title><link rel=stylesheet href=../../assets/stylesheets/main.f56500e0.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/custom.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=teal> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#configuring-zot class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=https://zotregistry.dev title=zotregistry.dev class="md-header__button md-logo" aria-label=zotregistry.dev data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> zotregistry.dev </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Configuring zot </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/project-zot/zot title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> project-zot/zot </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://zotregistry.dev title=zotregistry.dev class="md-nav__button md-logo" aria-label=zotregistry.dev data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> zotregistry.dev </label> <div class=md-nav__source> <a href=https://github.com/project-zot/zot title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> project-zot/zot </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../general/whats-new/ class=md-nav__link> What's New </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> General <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=General data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> General </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../general/concepts/ class=md-nav__link> Concepts </a> </li> <li class=md-nav__item> <a href=../../general/features/ class=md-nav__link> Key Features </a> </li> <li class=md-nav__item> <a href=../../general/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../general/extensions/ class=md-nav__link> Extensions </a> </li> <li class=md-nav__item> <a href=../../general/releases/ class=md-nav__link> Released Images </a> </li> <li class=md-nav__item> <a href=../../general/glossary/ class=md-nav__link> Glossary </a> </li> <li class=md-nav__item> <a href=../../general/project/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> User Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="User Guides" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> User Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-guides/user-guide-datapath/ class=md-nav__link> Push and Pull Image Content </a> </li> <li class=md-nav__item> <a href=../../user-guides/user-guide-gui/ class=md-nav__link> Use the Web Interface to Find Images </a> </li> <li class=md-nav__item> <a href=../../user-guides/zli/ class=md-nav__link> Command Line (zli) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Installation Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Installation Guides" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Installation Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../install-guides/install-guide-linux/ class=md-nav__link> Installing zot on Bare Metal Linux </a> </li> <li class=md-nav__item> <a href=../../install-guides/install-guide-k8s/ class=md-nav__link> Installing zot with Kubernetes and Helm </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Administrator Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Administrator Guides" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Administrator Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../admin-getting-started/ class=md-nav__link> Getting Started </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Configuring zot <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Configuring zot </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#configuration-file class=md-nav__link> Configuration file </a> <nav class=md-nav aria-label="Configuration file"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#extensions class=md-nav__link> Extensions </a> <nav class=md-nav aria-label=Extensions> <ul class=md-nav__list> <li class=md-nav__item> <a href=#enabling-and-disabling-extensions class=md-nav__link> Enabling and disabling extensions </a> </li> <li class=md-nav__item> <a href=#developing-custom-extensions class=md-nav__link> Developing custom extensions </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#network-configuration class=md-nav__link> Network configuration </a> </li> <li class=md-nav__item> <a href=#storage class=md-nav__link> Storage </a> <nav class=md-nav aria-label=Storage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#local-storage class=md-nav__link> Local storage </a> </li> <li class=md-nav__item> <a href=#remote-storage class=md-nav__link> Remote storage </a> </li> <li class=md-nav__item> <a href=#storage-features class=md-nav__link> Storage features </a> <nav class=md-nav aria-label="Storage features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commit class=md-nav__link> Commit </a> </li> <li class=md-nav__item> <a href=#deduplication class=md-nav__link> Deduplication </a> </li> <li class=md-nav__item> <a href=#garbage-collection class=md-nav__link> Garbage collection </a> </li> <li class=md-nav__item> <a href=#scrub class=md-nav__link> Scrub </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuring-storage class=md-nav__link> Configuring storage </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#security-and-hardening class=md-nav__link> Security and hardening </a> <nav class=md-nav aria-label="Security and hardening"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#authentication class=md-nav__link> Authentication </a> </li> <li class=md-nav__item> <a href=#identity-based-authorization class=md-nav__link> Identity-based authorization </a> </li> <li class=md-nav__item> <a href=#preventing-automated-attacks-with-failure-delay class=md-nav__link> Preventing automated attacks with failure delay </a> </li> <li class=md-nav__item> <a href=#rate-limiting class=md-nav__link> Rate limiting </a> </li> <li class=md-nav__item> <a href=#additional-security-features class=md-nav__link> Additional security features </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=#clustering-zot class=md-nav__link> Clustering zot </a> </li> <li class=md-nav__item> <a href=#syncing-and-mirroring-registries class=md-nav__link> Syncing and mirroring registries </a> </li> <li class=md-nav__item> <a href=#linting-uploaded-images class=md-nav__link> Linting uploaded images </a> </li> <li class=md-nav__item> <a href=#verifying-the-signatures-of-uploaded-images class=md-nav__link> Verifying the signatures of uploaded images </a> </li> <li class=md-nav__item> <a href=#enabling-the-registrys-graphical-user-interface class=md-nav__link> Enabling the registry's graphical user interface </a> </li> <li class=md-nav__item> <a href=#scrubbing-the-image-registry class=md-nav__link> Scrubbing the image registry </a> </li> <li class=md-nav__item> <a href=#scheduling-background-tasks class=md-nav__link> Scheduling background tasks </a> </li> <li class=md-nav__item> <a href=#enhanced-searching-and-querying-images class=md-nav__link> Enhanced searching and querying images </a> </li> <li class=md-nav__item> <a href=#setting-user-preferences class=md-nav__link> Setting user preferences </a> <nav class=md-nav aria-label="Setting user preferences"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#current-functionality class=md-nav__link> Current functionality </a> <nav class=md-nav aria-label="Current functionality"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#toggle-repository-star class=md-nav__link> Toggle repository star </a> </li> <li class=md-nav__item> <a href=#toggle-repository-bookmark class=md-nav__link> Toggle repository bookmark </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#verifying-the-configuration-file class=md-nav__link> Verifying the configuration file </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Developer Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Guide" data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-guide/onboarding/ class=md-nav__link> Onboarding </a> </li> <li class=md-nav__item> <a href=../../developer-guide/extensions-dev/ class=md-nav__link> Extensions </a> </li> <li class=md-nav__item> <a href=../../developer-guide/api-user-guide/ class=md-nav__link> Using the API </a> </li> <li class=md-nav__item> <a href=../../developer-guide/api-reference/ class=md-nav__link> API Reference </a> </li> <li class=md-nav__item> <a href=../../developer-guide/contributing/ class=md-nav__link> Contributing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Articles <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Articles data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Articles </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../articles/building-ci-cd-pipeline/ class=md-nav__link> CI/CD Pipeline </a> </li> <li class=md-nav__item> <a href=../../articles/authn-authz/ class=md-nav__link> Authentication and Authorization </a> </li> <li class=md-nav__item> <a href=../../articles/verifying-signatures/ class=md-nav__link> Verifying Image Signatures </a> </li> <li class=md-nav__item> <a href=../../articles/immutable-tags/ class=md-nav__link> Immutable Tags </a> </li> <li class=md-nav__item> <a href=../../articles/workflow/ class=md-nav__link> Software Provenance Workflow Using OCI Artifacts </a> </li> <li class=md-nav__item> <a href=../../articles/security-posture/ class=md-nav__link> Security Posture </a> </li> <li class=md-nav__item> <a href=../../articles/storage/ class=md-nav__link> Storage Planning </a> </li> <li class=md-nav__item> <a href=../../articles/retention/ class=md-nav__link> Retention Policies </a> </li> <li class=md-nav__item> <a href=../../articles/mirroring/ class=md-nav__link> Mirroring </a> </li> <li class=md-nav__item> <a href=../../articles/clustering/ class=md-nav__link> Clustering </a> </li> <li class=md-nav__item> <a href=../../articles/scaleout/ class=md-nav__link> Scale-out clustering </a> </li> <li class=md-nav__item> <a href=../../articles/high-availability/ class=md-nav__link> Deploying a Highly Available Registry </a> </li> <li class=md-nav__item> <a href=../../articles/monitoring/ class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=../../articles/graphql/ class=md-nav__link> Using GraphQL for Enhanced Searches </a> </li> <li class=md-nav__item> <a href=../../articles/benchmarking-with-zb/ class=md-nav__link> Benchmarking with zb </a> </li> <li class=md-nav__item> <a href=../../articles/pprofiling/ class=md-nav__link> Performance Profiling </a> </li> <li class=md-nav__item> <a href=../../articles/kind-deploy/ class=md-nav__link> Using kind for Deployment Testing </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#configuration-file class=md-nav__link> Configuration file </a> <nav class=md-nav aria-label="Configuration file"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#extensions class=md-nav__link> Extensions </a> <nav class=md-nav aria-label=Extensions> <ul class=md-nav__list> <li class=md-nav__item> <a href=#enabling-and-disabling-extensions class=md-nav__link> Enabling and disabling extensions </a> </li> <li class=md-nav__item> <a href=#developing-custom-extensions class=md-nav__link> Developing custom extensions </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#network-configuration class=md-nav__link> Network configuration </a> </li> <li class=md-nav__item> <a href=#storage class=md-nav__link> Storage </a> <nav class=md-nav aria-label=Storage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#local-storage class=md-nav__link> Local storage </a> </li> <li class=md-nav__item> <a href=#remote-storage class=md-nav__link> Remote storage </a> </li> <li class=md-nav__item> <a href=#storage-features class=md-nav__link> Storage features </a> <nav class=md-nav aria-label="Storage features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#commit class=md-nav__link> Commit </a> </li> <li class=md-nav__item> <a href=#deduplication class=md-nav__link> Deduplication </a> </li> <li class=md-nav__item> <a href=#garbage-collection class=md-nav__link> Garbage collection </a> </li> <li class=md-nav__item> <a href=#scrub class=md-nav__link> Scrub </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuring-storage class=md-nav__link> Configuring storage </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#security-and-hardening class=md-nav__link> Security and hardening </a> <nav class=md-nav aria-label="Security and hardening"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#authentication class=md-nav__link> Authentication </a> </li> <li class=md-nav__item> <a href=#identity-based-authorization class=md-nav__link> Identity-based authorization </a> </li> <li class=md-nav__item> <a href=#preventing-automated-attacks-with-failure-delay class=md-nav__link> Preventing automated attacks with failure delay </a> </li> <li class=md-nav__item> <a href=#rate-limiting class=md-nav__link> Rate limiting </a> </li> <li class=md-nav__item> <a href=#additional-security-features class=md-nav__link> Additional security features </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring class=md-nav__link> Monitoring </a> </li> <li class=md-nav__item> <a href=#clustering-zot class=md-nav__link> Clustering zot </a> </li> <li class=md-nav__item> <a href=#syncing-and-mirroring-registries class=md-nav__link> Syncing and mirroring registries </a> </li> <li class=md-nav__item> <a href=#linting-uploaded-images class=md-nav__link> Linting uploaded images </a> </li> <li class=md-nav__item> <a href=#verifying-the-signatures-of-uploaded-images class=md-nav__link> Verifying the signatures of uploaded images </a> </li> <li class=md-nav__item> <a href=#enabling-the-registrys-graphical-user-interface class=md-nav__link> Enabling the registry's graphical user interface </a> </li> <li class=md-nav__item> <a href=#scrubbing-the-image-registry class=md-nav__link> Scrubbing the image registry </a> </li> <li class=md-nav__item> <a href=#scheduling-background-tasks class=md-nav__link> Scheduling background tasks </a> </li> <li class=md-nav__item> <a href=#enhanced-searching-and-querying-images class=md-nav__link> Enhanced searching and querying images </a> </li> <li class=md-nav__item> <a href=#setting-user-preferences class=md-nav__link> Setting user preferences </a> <nav class=md-nav aria-label="Setting user preferences"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#current-functionality class=md-nav__link> Current functionality </a> <nav class=md-nav aria-label="Current functionality"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#toggle-repository-star class=md-nav__link> Toggle repository star </a> </li> <li class=md-nav__item> <a href=#toggle-repository-bookmark class=md-nav__link> Toggle repository bookmark </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#verifying-the-configuration-file class=md-nav__link> Verifying the configuration file </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=configuring-zot>Configuring zot<a class=headerlink href=#configuring-zot title="Permanent link">&para;</a></h1> <blockquote> <p><img alt=ðŸ‘‰ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f449.svg title=:point_right:> The registry administrator configures zot primarily through settings in the configuration file. </p> </blockquote> <p>Using the information in this guide, you can compose a configuration file with the settings and features you require for your zot registry server.</p> <blockquote> <p><img alt=ðŸ’¡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f4a1.svg title=:bulb:> Before launching zot with a new configuration, we recommend that you verify the syntax of your configuration as described in <a href=#verifying-config>Verifying the configuration file</a>.</p> </blockquote> <h2 id=configuration-file>Configuration file<a class=headerlink href=#configuration-file title="Permanent link">&para;</a></h2> <p>The configuration file is a JSON or YAML file that contains all configuration settings for zot functions such as:</p> <ul> <li>network</li> <li>storage</li> <li>authentication</li> <li>authorization</li> <li>logging</li> <li>metrics</li> <li>synchronization with other registries</li> <li>clustering</li> </ul> <p>The zot service is initiated with the <code>zot serve</code> command followed by the name of a configuration file, as in this example:</p> <p><code>zot serve config.json</code></p> <blockquote> <p><img alt=âœ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/270f.svg title=:pencil2:> The instructions and examples in this guide use <code>zot</code> as the name of the zot executable file. The examples do not include the path to the executable file.</p> </blockquote> <p>When you first build zot or deploy an image or container from the distribution, a basic configuration file <code>config.json</code> is created. This initial file is similar to the following example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=p>{</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>    </span><span class=nt>&quot;distSpecVersion&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.0.1&quot;</span><span class=p>,</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=nt>&quot;storage&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>        </span><span class=nt>&quot;rootDirectory&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;/tmp/zot&quot;</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>    </span><span class=nt>&quot;http&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>        </span><span class=nt>&quot;address&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;127.0.0.1&quot;</span><span class=p>,</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>        </span><span class=nt>&quot;port&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;8080&quot;</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>    </span><span class=nt>&quot;log&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>        </span><span class=nt>&quot;level&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;debug&quot;</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=p>}</span>
</code></pre></div> <p>The configuration file contains the Distribution Specification version (<code>distSpecVersion</code>). The structure and content of other attributes are described in the later sections of this guide.</p> <h3 id=extensions>Extensions<a class=headerlink href=#extensions title="Permanent link">&para;</a></h3> <p>Additional registry features that are not a part of the Distribution Specification are allowed to be added as <a href=https://github.com/opencontainers/distribution-spec/tree/main/extensions>Extensions</a>. </p> <p>With a full (not minimal) zot image, the following extension features can be enabled and configured under an <code>extensions</code> attribute in the configuration file as shown in the following example.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>{</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=err>...</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=nt>&quot;metrics&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>    </span><span class=nt>&quot;sync&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class=nt>&quot;search&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=nt>&quot;scrub&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>    </span><span class=nt>&quot;lint&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>    </span><span class=nt>&quot;trust&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>    </span><span class=nt>&quot;ui&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=p>}</span>
</code></pre></div> <blockquote> <p><img alt=âš  class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/26a0.svg title=:warning:> The extension features are available only with a full zot image. With a minimal zot image, the <code>extensions</code> section is ignored if present.</p> </blockquote> <p>The following features are configured under the <code>extensions</code> attribute.</p> <ul> <li><a href=#monitor_config>Metrics</a></li> <li><a href=#sync_config>Sync</a></li> <li><a href=#search_config>Search</a></li> <li><a href=#scrub_config>Scrub</a></li> <li><a href=#lint_config>Lint</a></li> <li><a href=#trust_config>ImageTrust</a></li> <li><a href=#ui_config>UI</a></li> </ul> <p>An extension feature is usually enabled by the presence of the featureâ€™s attribute under <code>extensions</code>. An extension feature can then be disabled by either omitting the feature attribute or by including an <code>enable</code> attribute with a value of <code>false</code>.</p> <blockquote> <p><img alt=âœ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/270f.svg title=:pencil2:> Two API-only extensions, <a href=#userprefs_config>User Preferences</a> and <a href=#mgmt_config>Mgmt</a>, are not enabled or configured under the <code>extensions</code> section of the configuration file. These API-only extensions are enabled as follows:</p> <ul> <li> <p><a href=#mgmt_config>Mgmt</a> is enabled when the <code>Search</code> extension is enabled.</p> </li> <li> <p><a href=#userprefs_config>User Preferences</a> is enabled when both the <code>Search</code> and <code>UI</code> extensions are enabled. </p> </li> </ul> </blockquote> <h4 id=enabling-and-disabling-extensions>Enabling and disabling extensions<a class=headerlink href=#enabling-and-disabling-extensions title="Permanent link">&para;</a></h4> <p>Following is an example of enabling or disabling a feature in the <code>extensions</code> section. The scrub feature is enabled in these two configurations:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nt>&quot;scrub&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{}</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>&quot;scrub&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nt>&quot;enable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=p>}</span>
</code></pre></div> <p>The scrub feature is disabled in these two configurations:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>&quot;scrub&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=nt>&quot;enable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=p>}</span>
</code></pre></div> <h4 id=developing-custom-extensions>Developing custom extensions<a class=headerlink href=#developing-custom-extensions title="Permanent link">&para;</a></h4> <p>New functionality can be added to the zot registry by developing custom extensions for integration into zot. For information about developing extensions, see <a href=../../developer-guide/extensions-dev/ ><em>Developing New Extensions</em></a>.</p> <p><a name=network_config></a></p> <h2 id=network-configuration>Network configuration<a class=headerlink href=#network-configuration title="Permanent link">&para;</a></h2> <p>Use the <code>http</code> attribute in the configuration file to configure the zot network settings, as shown in the following example.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>&quot;http&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>&quot;address&quot;</span><span class=p>:</span><span class=s2>&quot;127.0.0.1&quot;</span><span class=p>,</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>  </span><span class=nt>&quot;port&quot;</span><span class=p>:</span><span class=s2>&quot;8080&quot;</span><span class=p>,</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>  </span><span class=nt>&quot;realm&quot;</span><span class=p>:</span><span class=s2>&quot;zot&quot;</span><span class=p>,</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>  </span><span class=nt>&quot;tls&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=nt>&quot;cert&quot;</span><span class=p>:</span><span class=s2>&quot;test/data/server.cert&quot;</span><span class=p>,</span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=nt>&quot;key&quot;</span><span class=p>:</span><span class=s2>&quot;test/data/server.key&quot;</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=p>}</span>
</code></pre></div> <p>The following table lists the configurable attributes.</p> <table> <thead> <tr> <th>Attribute</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>address</code></td> <td>The IP address of the zot server.</td> </tr> <tr> <td><code>port</code></td> <td>The port number of the zot server.</td> </tr> <tr> <td><code>realm</code></td> <td>The security policy domain defined for the server.</td> </tr> <tr> <td><code>tls</code></td> <td>The included attributes in this section specify the Transport Layer Security (TLS) settings for the server.</td> </tr> <tr> <td><code>cert</code></td> <td>The path and filename of the serverâ€™s SSL/TLS certificate.</td> </tr> <tr> <td><code>key</code></td> <td>The path and filename of the serverâ€™s registry key.</td> </tr> </tbody> </table> <p><a name=storage_config></a></p> <h2 id=storage>Storage<a class=headerlink href=#storage title="Permanent link">&para;</a></h2> <p>Exposing flexibility in storage capabilities is a key tenet for catering to the requirements of varied environments ranging from cloud to on-premises to IoT.</p> <p>Filesystem storage is configured with the <code>storage</code> attribute in the zot configuration file, as shown in the following simple example.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>&quot;storage&quot;</span><span class=p>:{</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nt>&quot;rootDirectory&quot;</span><span class=p>:</span><span class=s2>&quot;/tmp/zot&quot;</span><span class=p>,</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span><span class=nt>&quot;commit&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>  </span><span class=nt>&quot;dedupe&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span><span class=nt>&quot;gc&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>  </span><span class=nt>&quot;gcDelay&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1h&quot;</span><span class=p>,</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>  </span><span class=nt>&quot;gcInterval&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;24h&quot;</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=p>}</span>
</code></pre></div> <p>With zot, you have the option to store your registry image files either in local filesystem storage or in cloud storage, such as an Amazon Simple Storage Service (S3) bucket.</p> <h3 id=local-storage>Local storage<a class=headerlink href=#local-storage title="Permanent link">&para;</a></h3> <p>zot can store and serve files from one or more local directories (folders). A minimum of one root directory is required for local hosting, but additional hosted directories can be added. When accessed by HTTP APIs, all directories can appear as a single data store.</p> <blockquote> <p><img alt=âœ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/270f.svg title=:pencil2:> Remote filesystems that are mounted and accessible locally such as <code>NFS</code> or <code>fuse</code> are treated as local filesystems.</p> </blockquote> <h3 id=remote-storage>Remote storage<a class=headerlink href=#remote-storage title="Permanent link">&para;</a></h3> <p>zot can also store data remotely in the cloud, using the storage APIs of the cloud service. Currently, zot supports only the AWS S3 storage service.</p> <p>For detailed information about configuring S3 storage, see the <a href="https://docs.aws.amazon.com/s3/?icmpid=docs_homepage_featuredsvcs">AWS S3 documentation</a> and <a href=../../articles/storage/ >Storage Planning with zot</a>.</p> <h3 id=storage-features>Storage features<a class=headerlink href=#storage-features title="Permanent link">&para;</a></h3> <h4 id=commit>Commit<a class=headerlink href=#commit title="Permanent link">&para;</a></h4> <p>Most modern filesystems buffer and flush RAM data to disk after a delay. The purpose of this function is to improve performance at the cost of higher disk memory usage. In embedded devices such as Raspberry Pi, for example, where RAM may be very limited and at a premium, it is desirable to flush data to disk more frequently. The zot storage configuration exposes an option called <code>commit</code> which, when enabled, causes data writes to be committed to disk immediately. This option is disabled by default.</p> <h4 id=deduplication>Deduplication<a class=headerlink href=#deduplication title="Permanent link">&para;</a></h4> <p>Deduplication is a storage space saving feature wherein only a single copy of specific content is maintained on disk while many different image manifests may hold references to that same content. The deduplication option (<code>dedupe</code>) is also available for supported cloud storage backends.</p> <p>Upon startup, zot enforces the <code>dedupe</code> status on the existing storage. If the <code>dedupe</code> status upon startup is <code>true</code>, zot deduplicates all blobs found in storage, both local and remote. If the status upon startup is <code>false</code>, zot restores cloud storage blobs to their original state. There is no need for zot to restore local filesystem storage if hard links are used.</p> <h4 id=garbage-collection>Garbage collection<a class=headerlink href=#garbage-collection title="Permanent link">&para;</a></h4> <p>After an image is deleted by deleting an image manifest, the corresponding blobs can be purged to free up space. However, since Distribution Specification APIs are not transactional between blob and manifest lifecycle, care must be taken so as not to put the storage in an inconsistent state. Garbage collection in zot is an inline feature meaning that it is <strong>not</strong> necessary to take the registry offline. The zot configuration model allows for enabling and disabling garbage collection (<code>gc</code>). The model also allows the configuration of a tunable delay (<code>gcDelay</code>), which can be set depending on client network speeds and the size of blobs.</p> <h4 id=scrub>Scrub<a class=headerlink href=#scrub title="Permanent link">&para;</a></h4> <p>The <code>scrub</code> function, available as an <em>extension</em>, makes it possible to ascertain data validity by computing hashes on blobs periodically and continuously so that any bit rot is caught and reported early.</p> <h3 id=configuring-storage>Configuring storage<a class=headerlink href=#configuring-storage title="Permanent link">&para;</a></h3> <p>For detailed information about configuring local or remote storage and storage features for your zot registry, see <a href=../../articles/storage/ >Storage Planning with zot</a>.</p> <p><a name=security_config></a></p> <h2 id=security-and-hardening>Security and hardening<a class=headerlink href=#security-and-hardening title="Permanent link">&para;</a></h2> <h3 id=authentication>Authentication<a class=headerlink href=#authentication title="Permanent link">&para;</a></h3> <p>zot supports authentication by the following methods:</p> <ul> <li> <p>TLS mutual authentication</p> </li> <li> <p>Basic local authentication using an htpasswd file</p> </li> <li> <p>LDAP authentication</p> </li> <li> <p>Bearer (OAuth2) authentication using an HTTP Bearer token</p> </li> </ul> <p>For detailed information about configuring authentication for your zot registry, see <a href=../../articles/authn-authz/ >User Authentication and Authorization with zot</a>.</p> <h3 id=identity-based-authorization>Identity-based authorization<a class=headerlink href=#identity-based-authorization title="Permanent link">&para;</a></h3> <p>User identity can be used as an authorization criterion for allowing actions on one or more repository paths. For specific users, you can choose to allow any combination of read, create, update, or delete actions on specific repository paths.</p> <p>For detailed information about configuring access control policies for your zot registry, see <a href=../../articles/authn-authz/ >User Authentication and Authorization with zot</a>.</p> <h3 id=preventing-automated-attacks-with-failure-delay>Preventing automated attacks with failure delay<a class=headerlink href=#preventing-automated-attacks-with-failure-delay title="Permanent link">&para;</a></h3> <p>Use the <code>auth</code> and <code>failDelay</code> attributes under <code>http</code> in the configuration file to delay the response to an authentication failure. A delayed response helps to prevent automated attacks. The configuration is shown in the following example.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>&quot;http&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nt>&quot;auth&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=nt>&quot;failDelay&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=p>}</span>
</code></pre></div> <p>The <code>failDelay</code> attribute specifies a waiting time, in seconds, before zot sends a failure notification to an authenticating user who has been denied access.</p> <h3 id=rate-limiting>Rate limiting<a class=headerlink href=#rate-limiting title="Permanent link">&para;</a></h3> <p>You can limit the rate of API calls from users by configuring the <code>Ratelimit</code> attribute in the configuration file, as shown in the following example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nt>&quot;http&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>    </span><span class=nt>&quot;address&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;127.0.0.1&quot;</span><span class=p>,</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=nt>&quot;port&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;8080&quot;</span><span class=p>,</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span><span class=nt>&quot;Ratelimit&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>        </span><span class=nt>&quot;Rate&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>        </span><span class=nt>&quot;Methods&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>            </span><span class=p>{</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>                </span><span class=nt>&quot;Method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;GET&quot;</span><span class=p>,</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>                </span><span class=nt>&quot;Rate&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>        </span><span class=p>]</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=p>}</span>
</code></pre></div> <p>In this example, the <code>Rate</code> attribute directly under <code>Ratelimit</code> sets a global rate limit of ten API calls per second. You can optionally override the global limit for specific API <code>Methods</code>. In this example, API <code>GET</code> calls are limited to five per second.</p> <h3 id=additional-security-features>Additional security features<a class=headerlink href=#additional-security-features title="Permanent link">&para;</a></h3> <p>For detailed information about configuring additional security features for your zot registry, see <a href=../../articles/security-posture/ >Security Posture</a>.</p> <p><a name=monitor_config></a></p> <h2 id=monitoring>Monitoring<a class=headerlink href=#monitoring title="Permanent link">&para;</a></h2> <p>zot supports a range of monitoring tools including the following:</p> <ul> <li> <p>Logging</p> <p>Logging for zot operations is configured with the <code>log</code> attribute in the configuration file.</p> </li> <li> <p>Metrics</p> <p>Metrics data is available in a Prometheus format. A full zot image with extensions includes a node exporter. A minimal zot image can use an external node exporter such as <code>zxp</code>.</p> </li> <li> <p>Benchmarking</p> <p>The zot project includes the <code>zb</code> tool, which allows you to benchmark a zot registry or any other container image registry that conforms to the <a href=https://github.com/opencontainers/distribution-spec>OCI Distribution Specification</a>.</p> </li> <li> <p>Performance profiling</p> <p>Performance profiling capabilities within zot allow a zot <a href=../../articles/authn-authz/ >administrator</a> to collect and export a range of diagnostic performance data such as CPU intensive function calls, memory allocations, and execution traces. The collected data can then be analyzed using Go tools and a variety of available visualization tools.</p> </li> </ul> <p>When zot is deployed in a Kubernetes setup, a site reliability engineering (SRE) operator can monitor service level indicators (SLI) such as metrics and logs. Metrics will appear in <a href=https://prometheus.io/docs/guides/query-log/ >Prometheus</a> using the zot <code>metrics</code> extension, while logs will appear in the Elasticsearch stack (<a href=https://www.elastic.co/what-is/elk-stack>ELK stack</a>) using <a href=https://www.elastic.co/beats/filebeat>Filebeat</a>.</p> <p>For detailed information about the monitoring tools, see <a href=../../articles/monitoring/ >Monitoring the registry</a>.</p> <p>For detailed information about benchmarking, see <a href=../../articles/benchmarking-with-zb/ >Benchmarking zot with zb</a>.</p> <p>For detailed information about performance profiling, see <a href=../../articles/pprofiling/ >Performance Profiling in zot</a>.</p> <p><a name=cluster_config></a></p> <h2 id=clustering-zot>Clustering zot<a class=headerlink href=#clustering-zot title="Permanent link">&para;</a></h2> <p>To ensure high-availability of the registry, zot supports a clustering scheme with stateless zot instances/replicas fronted by a loadbalancer and a shared remote backend storage. This scheme allows the registry service to remain available even if a few replicas fail or become unavailable. Loadbalancing across many zot replicas can also increase aggregate network throughput.</p> <p>For detailed information about clustering with zot, see <a href=../../articles/clustering/ >zot Clustering</a>.</p> <p><a name=sync_config></a></p> <h2 id=syncing-and-mirroring-registries>Syncing and mirroring registries<a class=headerlink href=#syncing-and-mirroring-registries title="Permanent link">&para;</a></h2> <p>A zot registry can mirror one or more upstream OCI registries, including popular cloud registries such as <a href=https://hub.docker.com/ >Docker Hub</a> and <a href=https://cloud.google.com/artifact-registry>Google Container Registry</a>. If an upstream registry is OCI distribution-spec conformant for pulling images, you can use zot's <code>sync</code> extension feature to implement a downstream mirror, synchronizing OCI images and corresponding artifacts. Synchronization between registries can be implemented by periodic polling of the upstream registry or synchronization can occur on demand, when a user pulls an image from the downstream registry.</p> <p>As with git, wherein every clone is a full repository, you can configure a local zot instance to be a full OCI mirror registry. This allows for a fully distributed disconnected container image build pipeline.</p> <p>For detailed information about syncing and mirroring, see <a href=../../articles/mirroring/ >OCI Registry Mirroring With zot</a>.</p> <p><a name=lint_config></a></p> <h2 id=linting-uploaded-images>Linting uploaded images<a class=headerlink href=#linting-uploaded-images title="Permanent link">&para;</a></h2> <p>The lint extension can check an uploaded image to enforce the presence of required annotations such as the author or the license.</p> <p>To configure linting, add the <code>lint</code> attribute under <code>extensions</code> in the configuration file, as shown in the following example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=nt>&quot;lint&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>      </span><span class=nt>&quot;enable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>      </span><span class=nt>&quot;mandatoryAnnotations&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;annot1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;annot2&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;annot3&quot;</span><span class=p>]</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>      </span><span class=p>}</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class=p>}</span>
</code></pre></div> <p>The following table lists the configurable attributes of the <code>lint</code> extension.</p> <table> <thead> <tr> <th>Attribute</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>enable</code></td> <td>If this attribute is missing, incoming image linting is disabled by default. Linting can be enabled by including this attribute and setting it to <code>true</code>.</td> </tr> <tr> <td><code>mandatoryAnnotations</code></td> <td>A list of annotations that are required to be present in the image being pushed to the repository.</td> </tr> </tbody> </table> <p>If the mandatory annotations option is configured when you push an image, linter will verify that the mandatory annotations list present in the configuration is also found in the manifest's annotations list. If any annotations are missing, the push is denied.</p> <p><a name=trust_config></a></p> <h2 id=verifying-the-signatures-of-uploaded-images>Verifying the signatures of uploaded images<a class=headerlink href=#verifying-the-signatures-of-uploaded-images title="Permanent link">&para;</a></h2> <p>The <code>trust</code> extension provides a mechanism to verify image signatures using certificates and public keys.</p> <p>To enable image signature verification, you must add the <code>trust</code> attribute under <code>extensions</code> in the zot configuration file and enable one or more verification tools, as shown in the following example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>&quot;trust&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span><span class=nt>&quot;enable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span><span class=nt>&quot;cosign&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=nt>&quot;notation&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=p>}</span>
</code></pre></div> <p>You must also upload public keys (for <code>cosign</code>) or certificates (for <code>notation</code>) that can be used to verify the image signatures. </p> <p>For detailed information about configuring image signature verification, see <a href=../../articles/verifying-signatures/ >Verifying image signatures</a>.</p> <p><a name=ui_config></a></p> <h2 id=enabling-the-registrys-graphical-user-interface>Enabling the registry's graphical user interface<a class=headerlink href=#enabling-the-registrys-graphical-user-interface title="Permanent link">&para;</a></h2> <p>Using the zot <a href=../../user-guides/user-guide-gui/ >graphical user interface (GUI)</a>, a user can browse a zot registry for container images and artifacts.</p> <p>To configure zot's GUI, add the <code>ui</code> attribute under <code>extensions</code> in the configuration file, as shown in the following example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=nt>&quot;ui&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>    </span><span class=nt>&quot;enable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=p>}</span>
</code></pre></div> <p>The following table lists the configurable attributes of the <code>ui</code> extension.</p> <table> <thead> <tr> <th>Attribute</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>enable</code></td> <td>If this attribute is missing, the zot GUI is disabled by default. The GUI can be enabled by including this attribute and setting it to <code>true</code>.</td> </tr> </tbody> </table> <p><a name=scrub_config></a></p> <h2 id=scrubbing-the-image-registry>Scrubbing the image registry<a class=headerlink href=#scrubbing-the-image-registry title="Permanent link">&para;</a></h2> <p>To check the integrity of the filesystem and the data in the registry, you can schedule a periodic scrub operation. The scrub process traverses the filesystem, verifying that all data blocks are readable. While running, the process may slightly reduce the registry performance.</p> <p>To enable scrubbing, add the <code>scrub</code> attribute under <code>extensions</code> in the configuration file, as shown in the following example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nt>&quot;scrub&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=nt>&quot;enable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span><span class=nt>&quot;interval&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;24h&quot;</span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=p>}</span>
</code></pre></div> <p>The following table lists the configurable attributes for scrubbing the registry.</p> <table> <thead> <tr> <th>Attribute</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>enable</code></td> <td>If this attribute is missing, registry scrubbing is enabled by default. Scrubbing can be disabled by setting this attribute to <code>false</code>.</td> </tr> <tr> <td><code>interval</code></td> <td>The time interval between periodic scrub operations. This value must be at least two hours (<code>2h</code>).</td> </tr> </tbody> </table> <p><a name=background_config></a></p> <h2 id=scheduling-background-tasks>Scheduling background tasks<a class=headerlink href=#scheduling-background-tasks title="Permanent link">&para;</a></h2> <p>Some zot functions, such as garbage collection and registry synchronization, run as background tasks. These tasks are queued and executed by the scheduler. </p> <p>The scheduler is by default allowed to simultaneously run a maximum number of tasks equal to four times the number of CPUs available to the zot process. For most users, there should be no need to modify this maximum number. If such a need arises, you can configure a new maximum number of simultaneous tasks in the <code>numWorkers</code> property of the <code>scheduler</code> attribute in the configuration file, as shown in the following example.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=p>{</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class=nt>&quot;distSpecVersion&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.1.0-dev&quot;</span><span class=p>,</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span><span class=nt>&quot;scheduler&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=nt>&quot;numWorkers&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=err>...</span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=p>}</span>
</code></pre></div> <p><a name=search_config></a></p> <h2 id=enhanced-searching-and-querying-images>Enhanced searching and querying images<a class=headerlink href=#enhanced-searching-and-querying-images title="Permanent link">&para;</a></h2> <p>While basic searching is always enabled for images in the zot registry, you can enable enhanced registry searching and filtering using graphQL.</p> <p>Add the <code>search</code> attribute under <code>extensions</code> in the configuration file to enable and configure the enhanced search extension, as shown in the following example.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nt>&quot;extensions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span><span class=nt>&quot;search&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=nt>&quot;enable&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=nt>&quot;cve&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>      </span><span class=nt>&quot;updateInterval&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2h&quot;</span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=p>}</span>
</code></pre></div> <p>The following table lists the configurable attributes for enhanced search.</p> <table> <thead> <tr> <th>Attribute</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>enable</code></td> <td>If this attribute is missing, enhanced search is enabled by default. Enhanced search can be disabled by setting this attribute to <code>false</code>.</td> </tr> <tr> <td><code>cve</code></td> <td>Extends enhanced search to allow searching of Common Vulnerabilities and Exposures (CVE).</td> </tr> <tr> <td><code>updateInterval</code></td> <td>Sets the interval at which the searchable database of CVE items is refreshed.</td> </tr> </tbody> </table> <p><a name=userprefs_config></a></p> <h2 id=setting-user-preferences>Setting user preferences<a class=headerlink href=#setting-user-preferences title="Permanent link">&para;</a></h2> <p>The user preferences extension provides an API endpoint for adding configurable user preferences for a repository. This custom extension, not a part of the OCI distribution, is accessible only by authenticated users of the registry. Unauthenticated users are denied access.</p> <p>The user preferences extension is enabled by default when the <code>search</code> and <code>ui</code> extensions are enabled. There are no other configuration file fields for this extension.</p> <p>A <code>userprefs</code> API endpoint accepts as a query parameter an <code>action</code> to perform along with any other required parameters for the specified action. The actions currently implemented do not require an HTTP payload, nor do they return any related data other than an HTTP response code.</p> <h3 id=current-functionality>Current functionality<a class=headerlink href=#current-functionality title="Permanent link">&para;</a></h3> <p>The current functions implemented by this extension include:</p> <ul> <li>Toggling the star (favorites) icon for a repository.</li> <li>Toggling the bookmark icon for a repository.</li> </ul> <h4 id=toggle-repository-star>Toggle repository star<a class=headerlink href=#toggle-repository-star title="Permanent link">&para;</a></h4> <p>This action sets the repository star property to <code>true</code> if it is <code>false</code>, and to <code>false</code> if it is <code>true</code>.</p> <table> <thead> <tr> <th>Action</th> <th>Parameter</th> <th>Parameter Description</th> </tr> </thead> <tbody> <tr> <td>toggleStar</td> <td>repo</td> <td>The name of the repository whose star is to be changed</td> </tr> </tbody> </table> <p>This example toggles a star on a repository named repoName:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>PUT
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>http://localhost:5000/v2/_zot/ext/userprefs?
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>action=toggleStar&amp;repo=repoName
</code></pre></div> <h4 id=toggle-repository-bookmark>Toggle repository bookmark<a class=headerlink href=#toggle-repository-bookmark title="Permanent link">&para;</a></h4> <p>This action sets the repository bookmark property to <code>true</code> if it is <code>false</code>, and to <code>false</code> if it is <code>true</code>.</p> <table> <thead> <tr> <th>Action</th> <th>Parameter</th> <th>Parameter Description</th> </tr> </thead> <tbody> <tr> <td>toggleBookmark</td> <td>repo</td> <td>The name of the repository whose bookmark is to be changed</td> </tr> </tbody> </table> <p>This example toggles a bookmark on a repository named repoName:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>PUT
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>http://localhost:5000/v2/_zot/ext/userprefs?
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>action=toggleBookmark&amp;repo=repoName
</code></pre></div> <p><a name=verifying-config></a></p> <h2 id=verifying-the-configuration-file>Verifying the configuration file<a class=headerlink href=#verifying-the-configuration-file title="Permanent link">&para;</a></h2> <p>Before launching zot, verify the syntax of your configuration file using the following command:</p> <p><code>zot verify &lt;configfile&gt;</code></p> <blockquote> <p><img alt=âœ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/270f.svg title=:pencil2:> Verifying the configuration file protects against operator errors and any conflicts arising from zot release version changes.</p> </blockquote> <p>After verifying your configuration file, you can launch zot with the following command:</p> <p><code>zot serve &lt;configfile&gt;</code></p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 12, 2023</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2019 - 2024 The zot project authors, All Rights Reserved. | The Linux FoundationÂ® (TLF) has registered trademarks and uses trademarks. For a list of TLF trademarks, see <a href=https://www.linuxfoundation.org/trademark-usage/ >Trademark Usage</a> </div> </div> <div class=md-social> <a href=https://github.com/project-zot/zot.git target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/zothub target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://cloud-native.slack.com/archives/C03EGRE4QGH target=_blank rel=noopener title=cloud-native.slack.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "search.share", "toc.follow", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.12658920.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.5cf534bf.min.js></script> </body> </html>